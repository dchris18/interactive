<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cinematic Sky Clock</title>

<style>
/* ---------- Custom Font: Druk Cond Super ---------- */
@font-face {
  font-family: 'DrukCondSuper';
  src: url('DrukCond-Super.otf') format('opentype');
  font-weight: normal;
  font-style: normal;
}

/* ---------- Custom Font: Druk Text Heavy (for clock numbers) ---------- */
@font-face {
  font-family: 'DrukTextHeavy';
  src: url('DrukText-Heavy.otf') format('opentype');
  font-weight: normal;
  font-style: normal;
}

body{
  margin:0;
  height:100vh;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  font-family:Arial, sans-serif;
  background:black;
  transition:background 1.2s linear;
}

/* ---------- Clock ---------- */
.clock{
  position:relative;
  width:450px;
  height:450px;
  border-radius:50%;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(12px);
  border:4px solid rgba(255,255,255,0.6);
  box-shadow:0 0 50px rgba(0,0,0,0.4),
             inset 0 0 25px rgba(255,255,255,0.2);
  z-index:5;
}

.center-dot{
  position:absolute;
  width:14px;
  height:14px;
  background:white;
  border-radius:50%;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:10;
}

.hand{
  position:absolute;
  bottom:50%;
  left:50%;
  transform-origin:bottom center;
  transform:translateX(-50%);
}

.hour-hand{
  width:8px;
  height:100px;
  background:white;
  border-radius:4px;
}

.minute-hand{
  width:5px;
  height:150px;
  background:white;
  border-radius:3px;
}

/* ---------- Clock Numbers ---------- */
.clock-number{
  position:absolute;
  width:55px;
  height:55px;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  font-weight:900;
  font-size:26px;
  transform:translate(-50%,-50%);
  cursor:pointer;
  border-radius:50%;
  user-select:none;
  text-decoration:none; /* supports <a> */
}

/* Pulse Animation */
@keyframes pulse{
  0%   { transform:translate(-50%,-50%) scale(1); color:white; text-shadow:none; }
  50%  { transform:translate(-50%,-50%) scale(1.15); color:#FFD700; text-shadow:0 0 5px #FFD700,0 0 10px #FFA500; }
  100% { transform:translate(-50%,-50%) scale(1); color:white; text-shadow:none; }
}

.clock-number.pulsing{
  animation:pulse 0.4s ease;
}

/* Hover/active affordance for clickable numbers (esp. the "1") */
.clock-number:hover{
  background:rgba(255,255,255,0.10);
}
.clock-number:active{
  transform:translate(-50%,-50%) scale(0.98);
}

/* ---------- Headline synced with day cycle ---------- */
h1{
  font-family:'DrukCondSuper', sans-serif;
  font-weight:900;
  font-size:clamp(48px,7vw,80px);
  color:white;
  text-align:center;
  margin-top:70px;
  letter-spacing:2px;
  line-height:1.1;
  text-shadow:3px 3px 12px rgba(0,0,0,0.7);
  pointer-events:none;
  display:inline-block;
  transform-origin:center bottom;
  transition:text-shadow 0.5s linear, color 0.5s linear;
}

/* ---------- Celestial Bodies ---------- */
.sun,.moon{
  position:absolute;
  width:70px;
  height:70px;
  border-radius:50%;
  pointer-events:none;
}

.sun{
  background:radial-gradient(circle at 30% 30%, #fffacd,#FFD700,#FFA500);
  box-shadow:0 0 70px #FFD700;
}

.moon{
  background:radial-gradient(circle at 30% 30%, #fff,#ddd);
  box-shadow:0 0 25px rgba(255,255,255,0.5);
}

/* ---------- Stars ---------- */
.stars{
  position:absolute;
  width:100%;
  height:100%;
  pointer-events:none;
  opacity:0;
  transition:opacity 2s ease;
}

.star{
  position:absolute;
  background:white;
  border-radius:50%;
  animation:twinkle infinite alternate ease-in-out;
}

@keyframes twinkle{
  from{opacity:0.3; transform:scale(0.8);}
  to{opacity:1; transform:scale(1.3);}
}

/* ---------- Clouds ---------- */
.cloud{
  position:absolute;
  filter:blur(10px);
  opacity:0;
  transition:opacity 2s ease;
}

.cloud div{
  position:absolute;
  background:rgba(255,255,255,0.85);
  border-radius:50%;
}

/* ---------- Shooting Star ---------- */
.shooting-star{
  position:absolute;
  width:2px;
  height:2px;
  background:white;
  border-radius:50%;
  pointer-events:none;
  opacity:0;
  box-shadow:0 0 5px white, 0 0 10px white;
  transition:opacity 0.2s linear;
}

/* ---------- Comet ---------- */
.comet{
  position:absolute;
  height:2px;
  pointer-events:none;
  opacity:0;
  transform-origin:left center;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.9), rgba(255,255,255,0.0));
  filter:drop-shadow(0 0 10px rgba(255,255,255,0.8)) drop-shadow(0 0 18px rgba(255,255,255,0.45));
}

.comet::after{
  content:"";
  position:absolute;
  left:75%;
  top:50%;
  width:6px;
  height:6px;
  border-radius:50%;
  transform:translate(-50%,-50%);
  background:radial-gradient(circle, rgba(255,255,255,1), rgba(255,255,255,0.35) 55%, rgba(255,255,255,0) 75%);
  filter:blur(0.2px);
}

/* =========================================================
   ADDITION: Better composition + responsiveness (no refactor)
   ========================================================= */

/* Keep sky layers predictable */
body{ position:relative; }

/* Stage wrapper to control spacing/layout */
.stage{
  position:relative;
  z-index:6;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:clamp(18px, 3.5vh, 34px);
  padding:clamp(16px, 3.5vw, 36px);
  width:min(900px, 100%);
  box-sizing:border-box;
}

/* Responsive clock sizing + proportional internals */
:root{
  /* Slightly smaller max clock size */
  --clock-size: min(420px, 78vw);

  /* Slightly bigger celestial bodies */
  --celestial-size: 82px;

  /* Numbers: BIGGER (scaled up more) */
  --num-size: clamp(48px, calc(var(--clock-size) * 0.145), 70px);
  --num-font: clamp(24px, calc(var(--clock-size) * 0.072), 34px);

  /* Hands: keep current sizing (unchanged from your last) */
  --hour-w: clamp(5px, calc(var(--clock-size) * 0.0155), 7.5px);
  --hour-h: clamp(68px, calc(var(--clock-size) * 0.18), 96px);

  --min-w: clamp(3px, calc(var(--clock-size) * 0.0102), 4.8px);
  --min-h: clamp(104px, calc(var(--clock-size) * 0.275), 142px);

  --dot: clamp(12px, calc(var(--clock-size) * 0.032), 16px);
}

.clock{
  width:var(--clock-size);
  height:var(--clock-size);
}

/* Keep hands proportional when clock shrinks */
.hour-hand{
  width:var(--hour-w);
  height:var(--hour-h);
}
.minute-hand{
  width:var(--min-w);
  height:var(--min-h);
}
.center-dot{
  width:var(--dot);
  height:var(--dot);
}

/* Clock numbers: bigger + DrukText-Heavy */
.clock-number{
  width:var(--num-size);
  height:var(--num-size);
  font-size:var(--num-font);
  font-family:'DrukTextHeavy', Arial, sans-serif;
  font-weight:900;
  letter-spacing:0;
}

/* Celestial sizing */
.sun,.moon{
  width:var(--celestial-size);
  height:var(--celestial-size);
}

/* Improve composition: headline spacing controlled by stage, not fixed margin */
h1{ margin-top:0; }

/* Small screens: keep things breathing and prevent crowding */
@media (max-height: 700px){
  .stage{ gap:clamp(12px, 2.4vh, 22px); }
}
@media (max-width: 420px){
  h1{ letter-spacing:1px; }
}

/* =========================================================
   ADDITION: Make clock look better + move it down slightly
   ========================================================= */

/* Move overall composition down slightly */
.stage{
  transform:translateY(12px);
}

/* Clock visual polish (glass rim + highlight) */
.clock{
  box-shadow:
    0 24px 70px rgba(0,0,0,0.45),
    0 0 50px rgba(0,0,0,0.35),
    inset 0 0 28px rgba(255,255,255,0.22),
    inset 0 0 10px rgba(255,255,255,0.08);
}

.clock::before{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:50%;
  border:1px solid rgba(255,255,255,0.18);
  box-shadow:
    inset 0 0 18px rgba(255,255,255,0.08),
    inset 0 0 2px rgba(255,255,255,0.12);
  pointer-events:none;
}

.clock::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  background:
    radial-gradient(circle at 30% 20%,
      rgba(255,255,255,0.22),
      rgba(255,255,255,0.08) 28%,
      rgba(255,255,255,0.02) 45%,
      rgba(255,255,255,0) 60%),
    radial-gradient(circle at 70% 85%,
      rgba(0,0,0,0.12),
      rgba(0,0,0,0) 55%);
  pointer-events:none;
}

/* =========================================================
   ADDITION: Less transparent clock face + thicker border
           + move down slightly more + one-line headline
   ========================================================= */

/* Make the clock face less see-through */
.clock{
  background:rgba(255,255,255,0.18);
  backdrop-filter:blur(18px);
  border:6px solid rgba(255,255,255,0.75);
}

/* Move it down slightly more (small additional shift) */
.stage{
  transform:translateY(20px);
}

/* Keep headline on one line on normal laptop/monitor screens */
h1{
  white-space:nowrap;
}

/* On smaller screens, allow wrapping again so it doesn't overflow */
@media (max-width: 520px){
  h1{ white-space:normal; }
}

/* =========================================================
   ADDITION: Move headline further down + nicer sun/moon
   ========================================================= */

/* Push headline down more under the clock (without changing stage gap) */
h1{
  margin-top:clamp(18px, 3.2vh, 34px);
}

/* More premium sun + moon styling */
.sun,.moon{
  overflow:hidden;
}

/* Sun: richer core + soft corona + tiny surface variation */
.sun{
  background:
    radial-gradient(circle at 30% 28%, rgba(255,255,255,0.95), rgba(255,250,205,0.95) 18%, rgba(255,215,0,0.95) 42%, rgba(255,165,0,0.92) 68%, rgba(255,140,0,0.9) 100%),
    radial-gradient(circle at 65% 65%, rgba(255,255,255,0.22), rgba(255,255,255,0) 55%);
  box-shadow:
    0 0 28px rgba(255,215,0,0.85),
    0 0 70px rgba(255,165,0,0.55),
    0 0 120px rgba(255,140,0,0.25);
}

.sun::before{
  content:"";
  position:absolute;
  inset:-18%;
  border-radius:50%;
  background:radial-gradient(circle, rgba(255,215,0,0.25), rgba(255,165,0,0.12) 45%, rgba(255,165,0,0) 70%);
  filter:blur(6px);
  opacity:0.95;
  pointer-events:none;
}

.sun::after{
  content:"";
  position:absolute;
  inset:10%;
  border-radius:50%;
  background:
    radial-gradient(circle at 40% 45%, rgba(255,255,255,0.22), rgba(255,255,255,0) 50%),
    radial-gradient(circle at 65% 35%, rgba(255,255,255,0.10), rgba(255,255,255,0) 55%);
  mix-blend-mode:screen;
  opacity:0.9;
  pointer-events:none;
}

/* Moon: depth + subtle craters */
.moon{
  background:
    radial-gradient(circle at 28% 25%, rgba(255,255,255,0.95), rgba(240,240,240,0.92) 32%, rgba(214,214,214,0.92) 68%, rgba(195,195,195,0.9) 100%),
    radial-gradient(circle at 70% 80%, rgba(0,0,0,0.10), rgba(0,0,0,0) 55%);
  box-shadow:
    0 0 18px rgba(255,255,255,0.45),
    0 0 40px rgba(255,255,255,0.18);
}

.moon::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  background:
    radial-gradient(circle at 38% 44%, rgba(0,0,0,0.10) 0 10px, rgba(0,0,0,0) 11px),
    radial-gradient(circle at 62% 30%, rgba(0,0,0,0.08) 0 7px, rgba(0,0,0,0) 8px),
    radial-gradient(circle at 55% 62%, rgba(0,0,0,0.07) 0 9px, rgba(0,0,0,0) 10px),
    radial-gradient(circle at 30% 70%, rgba(0,0,0,0.06) 0 6px, rgba(0,0,0,0) 7px);
  opacity:0.65;
  pointer-events:none;
}

.moon::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  background:radial-gradient(circle at 30% 25%, rgba(255,255,255,0.35), rgba(255,255,255,0.0) 55%);
  mix-blend-mode:screen;
  opacity:0.55;
  pointer-events:none;
}

/* =========================================================
   ADDITION: Even more detailed sun + moon (override pass)
   ========================================================= */

/* Sun: limb darkening + granulation + tiny sunspots */
.sun{
  background:
    radial-gradient(circle at 30% 26%,
      rgba(255,255,255,0.98),
      rgba(255,252,215,0.98) 14%,
      rgba(255,223,90,0.96) 32%,
      rgba(255,185,45,0.94) 60%,
      rgba(255,135,15,0.92) 100%),
    radial-gradient(circle at 50% 50%,
      rgba(0,0,0,0) 56%,
      rgba(0,0,0,0.08) 78%,
      rgba(0,0,0,0.18) 100%),
    repeating-radial-gradient(circle at 48% 52%,
      rgba(255,255,255,0.06) 0 2px,
      rgba(255,255,255,0.00) 2px 5px),
    radial-gradient(circle at 62% 58%,
      rgba(255,255,255,0.10),
      rgba(255,255,255,0.0) 55%),
    radial-gradient(circle at 38% 66%,
      rgba(120,60,10,0.12) 0 8px,
      rgba(120,60,10,0) 10px),
    radial-gradient(circle at 58% 36%,
      rgba(120,60,10,0.10) 0 6px,
      rgba(120,60,10,0) 8px),
    radial-gradient(circle at 44% 46%,
      rgba(120,60,10,0.08) 0 5px,
      rgba(120,60,10,0) 7px);
  box-shadow:
    0 0 26px rgba(255,230,120,0.85),
    0 0 70px rgba(255,170,40,0.58),
    0 0 130px rgba(255,120,10,0.28);
}

.sun::before{
  background:
    radial-gradient(circle,
      rgba(255,220,90,0.30),
      rgba(255,175,35,0.18) 40%,
      rgba(255,145,10,0.10) 55%,
      rgba(255,145,10,0.0) 72%);
  filter:blur(7px);
  opacity:0.98;
}

.sun::after{
  inset:8%;
  background:
    radial-gradient(circle at 38% 42%, rgba(255,255,255,0.22), rgba(255,255,255,0) 52%),
    radial-gradient(circle at 68% 30%, rgba(255,255,255,0.12), rgba(255,255,255,0) 58%),
    radial-gradient(circle at 58% 68%, rgba(255,255,255,0.08), rgba(255,255,255,0) 62%);
  opacity:0.95;
}

/* Moon: sharper crater field + terminator shading + rim light */
.moon{
  background:
    radial-gradient(circle at 28% 24%,
      rgba(255,255,255,0.97),
      rgba(242,242,242,0.94) 30%,
      rgba(212,212,212,0.92) 62%,
      rgba(188,188,188,0.90) 100%),
    radial-gradient(circle at 55% 55%,
      rgba(0,0,0,0) 55%,
      rgba(0,0,0,0.10) 80%,
      rgba(0,0,0,0.22) 100%),
    repeating-radial-gradient(circle at 52% 48%,
      rgba(255,255,255,0.05) 0 2px,
      rgba(255,255,255,0) 2px 6px);
  box-shadow:
    0 0 18px rgba(255,255,255,0.50),
    0 0 44px rgba(255,255,255,0.18);
}

.moon::before{
  background:
    radial-gradient(circle at 36% 42%, rgba(0,0,0,0.12) 0 10px, rgba(0,0,0,0) 12px),
    radial-gradient(circle at 58% 30%, rgba(0,0,0,0.10) 0 8px, rgba(0,0,0,0) 10px),
    radial-gradient(circle at 54% 60%, rgba(0,0,0,0.10) 0 11px, rgba(0,0,0,0) 13px),
    radial-gradient(circle at 30% 68%, rgba(0,0,0,0.09) 0 7px, rgba(0,0,0,0) 9px),
    radial-gradient(circle at 70% 55%, rgba(0,0,0,0.07) 0 6px, rgba(0,0,0,0) 8px),
    radial-gradient(circle at 44% 78%, rgba(0,0,0,0.06) 0 5px, rgba(0,0,0,0) 7px),
    radial-gradient(circle at 72% 34%, rgba(0,0,0,0.06) 0 5px, rgba(0,0,0,0) 7px);
  opacity:0.75;
}

.moon::after{
  background:
    radial-gradient(circle at 30% 22%,
      rgba(255,255,255,0.42),
      rgba(255,255,255,0.0) 58%),
    radial-gradient(circle at 20% 55%,
      rgba(255,255,255,0.22),
      rgba(255,255,255,0.0) 62%);
  opacity:0.58;
}

/* =========================================================
   Center clock in middle of screen, place text lower
   ========================================================= */

/* Stage becomes a full-height positioning context */
.stage{
  height:100vh;
  width:100%;
  padding:0;
  gap:0;
  transform:translateY(-28px);
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Bigger headline */
h1{
  font-size:clamp(84px, 9.2vw, 140px);
}

/* Headline is positioned BELOW the centered clock without shifting it */
h1{
  position:absolute;
  left:50%;
  top:calc(50% + (var(--clock-size) / 2) + 54px);
  translate:-50% 0;
  margin:0;
}

/* On smaller screens, keep it from going too low */
@media (max-height: 720px){
  h1{
    top:calc(50% + (var(--clock-size) / 2) + 34px);
  }
}
</style>
</head>

<body>

<div class="sun"></div>
<div class="moon"></div>
<div class="stars" id="stars"></div>

<div class="stage">
  <div class="clock" id="clock">
    <div class="hand hour-hand" id="hourHand"></div>
    <div class="hand minute-hand" id="minuteHand"></div>
    <div class="center-dot"></div>
  </div>

  <h1 id="headline">TIME WAITS FOR NO ONE</h1>
</div>

<script>
const sun=document.querySelector(".sun");
const moon=document.querySelector(".moon");
const stars=document.getElementById("stars");
const clock=document.getElementById("clock");
const hourHand=document.getElementById("hourHand");
const minuteHand=document.getElementById("minuteHand");
const headline=document.getElementById("headline");

/* ---------- Create Stars ---------- */
for(let i=0;i<200;i++){
  const s=document.createElement("div");
  s.classList.add("star");
  const size=Math.random()*3+1;
  s.style.width=size+"px";
  s.style.height=size+"px";
  s.style.top=Math.random()*100+"vh";
  s.style.left=Math.random()*100+"vw";
  s.style.animationDuration=(Math.random()*3+2)+"s";
  stars.appendChild(s);
}

/* ---------- Create Clock Numbers ---------- */
const clockSize=450;
const center=clockSize/2;
const numberRadius=clockSize*0.42;
const numbers=[];
const numberAngles=[];

for(let n=1;n<=12;n++){
  const angle=(n-3)*(Math.PI/6);
  numberAngles.push(angle);

  let num;

  /* Make "1" a button/link to timer.html */
  if(n === 1){
    num=document.createElement("a");
    num.href="timer.html";
    num.setAttribute("aria-label","Go to timer");
    num.setAttribute("title","Go to timer");
  }else{
    num=document.createElement("div");
    num.addEventListener("click",()=>{ alert("You clicked hour " + n); });
  }

  num.classList.add("clock-number");
  num.textContent=n;

  num.style.left=center+numberRadius*Math.cos(angle)+"px";
  num.style.top=center+numberRadius*Math.sin(angle)+"px";

  clock.appendChild(num);
  numbers.push(num);
}

/* =========================================================
   ADDITION: Responsive number layout based on actual clock size
   ========================================================= */
function layoutClockNumbers(){
  const size = clock.clientWidth;
  const c = size/2;
  const r = size*0.42;
  numbers.forEach((num,i)=>{
    const a = numberAngles[i];
    num.style.left = (c + r*Math.cos(a)) + "px";
    num.style.top  = (c + r*Math.sin(a)) + "px";
  });
}
layoutClockNumbers();
window.addEventListener("resize", layoutClockNumbers);

/* ---------- Minute-hand triggered pulse ---------- */
const pulseCooldown = Array(12).fill(false);
function checkMinuteHandPulse(minuteAngle){
  numbers.forEach((num,i)=>{
    const diff = Math.abs(minuteAngle - numberAngles[i]);
    if(diff < 0.17 && !pulseCooldown[i]){
      num.classList.add("pulsing");
      pulseCooldown[i] = true;
      setTimeout(()=>{
        num.classList.remove("pulsing");
        pulseCooldown[i] = false;
      }, 400);
    }
  });
}

/* ---------- Clouds ---------- */
const clouds=[];
function createCloud(){
  const cloud=document.createElement("div");
  cloud.classList.add("cloud");

  const size=Math.random()*120+80;
  cloud.style.width=size+"px";
  cloud.style.height=size*0.6+"px";
  cloud.style.top=Math.random()*70+"vh";
  cloud.style.left=Math.random()*100+"vw";

  for(let i=0;i<5;i++){
    const puff=document.createElement("div");
    const s=size*(0.4+Math.random()*0.4);
    puff.style.width=s+"px";
    puff.style.height=s+"px";
    puff.style.left=Math.random()*size*0.8+"px";
    puff.style.top=Math.random()*size*0.3+"px";
    cloud.appendChild(puff);
  }

  document.body.appendChild(cloud);
  clouds.push({el:cloud,speed:0.05+Math.random()*0.15});
}
for(let i=0;i<14;i++) createCloud();

/* ---------- Shooting Stars ---------- */
const shootingStars = [];
function createShootingStar(){
  const star = document.createElement("div");
  star.classList.add("shooting-star");
  document.body.appendChild(star);
  shootingStars.push(star);

  const startX = Math.random()*window.innerWidth;
  const startY = Math.random()*window.innerHeight*0.5;
  const length = 100 + Math.random()*100;
  const angle = -0.3 + Math.random()*0.6;

  star.style.left = startX + "px";
  star.style.top = startY + "px";
  star.style.opacity = 1;

  let step = 0;
  const steps = 30;
  const interval = setInterval(()=>{
    star.style.left = startX + Math.cos(angle)*length*(step/steps) + "px";
    star.style.top  = startY + Math.sin(angle)*length*(step/steps) + "px";
    star.style.opacity = 1 - step/steps;
    step++;
    if(step > steps){
      clearInterval(interval);
      star.remove();
    }
  },16);
}

function randomShootingStars(nightFactor){
  if(Math.random() < 0.01 * nightFactor){ createShootingStar(); }
}

/* ---------- Random Comets (night only) ---------- */
function createComet(){
  const comet = document.createElement("div");
  comet.classList.add("comet");
  document.body.appendChild(comet);

  const startSide = Math.random() < 0.5 ? "left" : "right";
  const startX = startSide === "left" ? -200 : window.innerWidth + 200;
  const startY = Math.random() * window.innerHeight * 0.45;

  const endX = startSide === "left" ? window.innerWidth + 260 : -260;
  const endY = startY + (Math.random() * 180 + 80);

  const dx = endX - startX;
  const dy = endY - startY;
  const angleRad = Math.atan2(dy, dx);
  const angleDeg = angleRad * 180 / Math.PI;

  const length = 220 + Math.random()*320;
  const duration = 900 + Math.random()*900;
  const thickness = 2 + Math.random()*1.2;

  comet.style.width = length + "px";
  comet.style.height = thickness + "px";
  comet.style.left = startX + "px";
  comet.style.top = startY + "px";
  comet.style.opacity = 0;

  comet.style.transform = `rotate(${angleDeg}deg)`;

  comet.animate(
    [{opacity:0}, {opacity:1}],
    {duration:120, fill:"forwards", easing:"linear"}
  );

  const travel = comet.animate(
    [
      { transform:`translate(0px, 0px) rotate(${angleDeg}deg)`, opacity:1 },
      { transform:`translate(${dx}px, ${dy}px) rotate(${angleDeg}deg)`, opacity:0 }
    ],
    {duration:duration, easing:"cubic-bezier(0.2, 0.8, 0.2, 1)", fill:"forwards"}
  );

  travel.onfinish = ()=> comet.remove();
}

function randomComets(nightFactor){
  if(Math.random() < 0.0022 * nightFactor){
    createComet();
  }
}

/* ---------- Sky & Clock Animation ---------- */
let angle=0;
function lerp(a,b,t){ return a+(b-a)*t; }

function animate(){
  angle+=0.0015;

  const cx=window.innerWidth/2;
  const cy=window.innerHeight*0.9;
  const radius=window.innerWidth/2;

  sun.style.left=cx+radius*Math.cos(angle-Math.PI)+"px";
  sun.style.top=cy-radius*Math.sin(angle-Math.PI)+"px";

  moon.style.left=cx+radius*Math.cos(angle)+"px";
  moon.style.top=cy-radius*Math.sin(angle)+"px";

  const elevation=Math.sin(angle-Math.PI);
  const t=(elevation+1)/2;
  const smooth=0.5-0.5*Math.cos(Math.PI*t);

  // Background gradient
  const nightTop=[0,0,0];
  const nightBottom=[5,8,20];
  const dayTop=[70,150,255];
  const dayBottom=[135,200,255];
  const r1=lerp(nightTop[0],dayTop[0],smooth);
  const g1=lerp(nightTop[1],dayTop[1],smooth);
  const b1=lerp(nightTop[2],dayTop[2],smooth);
  const r2=lerp(nightBottom[0],dayBottom[0],smooth);
  const g2=lerp(nightBottom[1],dayBottom[1],smooth);
  const b2=lerp(nightBottom[2],dayBottom[2],smooth);
  const golden=Math.exp(-Math.pow((t-0.5)*6,2));
  document.body.style.background=`
    linear-gradient(
      to top,
      rgb(${Math.round(r2+255*golden*0.3)},
          ${Math.round(g2+120*golden*0.2)},
          ${Math.round(b2+60*golden*0.15)}),
      rgb(${Math.round(r1)},
          ${Math.round(g1)},
          ${Math.round(b1)})
    )
  `;

  stars.style.opacity=Math.max(0,-elevation);

  clouds.forEach(obj=>{
    let left=parseFloat(obj.el.style.left);
    left+=obj.speed;
    if(left>100) left=-20;
    obj.el.style.left=left+"vw";
    obj.el.style.opacity=Math.max(0,elevation)*0.9;
  });

  sun.style.opacity=elevation>-0.1?1:0;
  moon.style.opacity=elevation<0.1?1:0;

  const hours=(angle/(2*Math.PI))*24;
  const mins=(hours-Math.floor(hours))*60;

  hourHand.style.transform=
    `translateX(-50%) rotate(${(hours/12)*360}deg)`;
  minuteHand.style.transform=
    `translateX(-50%) rotate(${(mins/60)*360}deg)`;

  const minuteAngle = ((mins/60)*2*Math.PI) - Math.PI/2; 
  checkMinuteHandPulse(minuteAngle);

  // Headline tilt + glow
  const leanDegree = -2 + 4 * t; 
  headline.style.transform = `rotate(${leanDegree * 2.34375}deg)`; 
  const glowStrength = 0.3 + 0.7*t;
  headline.style.textShadow = `0 0 ${10*glowStrength}px #FFD700,0 0 ${20*glowStrength}px #FFA500`;

  // Shooting stars + comets during night
  const nightFactor = Math.max(0, -elevation);
  randomShootingStars(nightFactor);
  randomComets(nightFactor);

  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
