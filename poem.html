<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Antique Envelope Note</title>

<style>
  :root{
    --navy-0:#040814;
    --navy-1:#07102a;
    --navy-2:#0a1a3a;

    --ink:#14100b;

    --env-0:#f0e7d3;
    --env-1:#d7ccb4;

    --stroke: rgba(30, 20, 10, 0.18);
    --shadow: rgba(0,0,0,0.55);
  }

  html, body{ height:100%; }

  body{
    margin:0;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    font-family: Georgia, "Times New Roman", serif;
    background: radial-gradient(circle at 50% 45%, var(--navy-2) 0%, var(--navy-1) 35%, var(--navy-0) 85%);
    animation: navyPulse 60s ease-in-out infinite;
  }

  @keyframes navyPulse{
    0%{
      background: radial-gradient(circle at 50% 45%, #081a3b 0%, #06112a 38%, #040814 86%);
      filter: brightness(0.98);
    }
    50%{
      background: radial-gradient(circle at 50% 45%, #0c2a5d 0%, #081a3b 40%, #05091a 88%);
      filter: brightness(1.05);
    }
    100%{
      background: radial-gradient(circle at 50% 45%, #081a3b 0%, #06112a 38%, #040814 86%);
      filter: brightness(0.98);
    }
  }

  /* soft grain */
  body::after{
    content:"";
    position:fixed;
    inset:-40%;
    pointer-events:none;
    opacity: 0.11;
    background:
      repeating-linear-gradient(0deg, rgba(255,255,255,0.08) 0 1px, transparent 1px 2px),
      repeating-linear-gradient(90deg, rgba(255,255,255,0.06) 0 1px, transparent 1px 3px);
    transform: rotate(8deg);
    mix-blend-mode: soft-light;
  }

  .wrap{
    width:min(860px, 94vw);
    height:min(860px, 92vh);
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .stage{
    width: min(860px, 94vw);
    height: min(860px, 92vh);
    position:relative;
    display:flex;
    align-items:flex-end;
    justify-content:center;
    padding-bottom: min(6vh, 62px);
    box-sizing:border-box;
  }

  .envelope{
    position:relative;
    width: min(700px, 94vw);
    aspect-ratio: 16 / 10;
    border-radius: 22px;
    perspective: 1200px;
    transform: translateZ(0);
  }

  /* clickable base area for reseal */
  .reseal-hit{
    position:absolute;
    left: 10%;
    right: 10%;
    bottom: 6%;
    height: 18%;
    z-index: 10;
    background: transparent;
    border: 0;
    padding: 0;
    cursor: pointer;
    display:none; /* only when open */
  }

  /* =========================
     PAPER (slightly lower)
  ========================= */
  .paper{
    position:absolute;
    left: 7.5%;
    right: 7.5%;
    bottom: 5.0%;                 /* just slightly lower */
    height: min(58vh, 560px);
    z-index: 6;
    opacity: 0;

    transform: translateY(54%) scale(0.985);
    transition:
      transform 1200ms cubic-bezier(.2,.9,.2,1),
      opacity 650ms ease;
    pointer-events:none;
  }

  .paper-inner{
    position:relative;
    height:100%;
    border-radius: 16px;
    border: 1px solid rgba(40,25,10,0.28);

    /* more tarnished / aged parchment */
    background:
      /* fibers */
      repeating-linear-gradient(0deg, rgba(90,70,40,0.05) 0 1px, transparent 1px 4px),
      repeating-linear-gradient(90deg, rgba(90,70,40,0.035) 0 1px, transparent 1px 5px),

      /* darker speckles */
      radial-gradient(circle at 22% 30%, rgba(40,25,10,0.10) 0 2px, transparent 3px),
      radial-gradient(circle at 65% 42%, rgba(40,25,10,0.08) 0 1.5px, transparent 2.8px),
      radial-gradient(circle at 75% 68%, rgba(40,25,10,0.10) 0 2px, transparent 3.2px),
      radial-gradient(circle at 38% 78%, rgba(40,25,10,0.08) 0 1.6px, transparent 2.8px),

      /* stains */
      radial-gradient(circle at 16% 18%, rgba(120,90,40,0.16), transparent 54%),
      radial-gradient(circle at 78% 22%, rgba(120,90,40,0.13), transparent 58%),
      radial-gradient(circle at 62% 86%, rgba(120,90,40,0.14), transparent 60%),
      radial-gradient(circle at 50% 55%, rgba(120,90,40,0.08), transparent 55%),

      /* warm parchment */
      linear-gradient(180deg, #f2e6cb, #e4d1ab);

    box-shadow: 0 26px 76px rgba(0,0,0,0.58);
    overflow:hidden;
    padding: clamp(18px, 2.1vw, 26px);
    box-sizing:border-box;
  }

  /* vignette + deckle-ish edges */
  .paper-inner::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius: 16px;
    pointer-events:none;
    background:
      radial-gradient(circle at 50% 50%, transparent 56%, rgba(75,55,25,0.22) 100%),
      radial-gradient(circle at 10% 12%, rgba(90,70,35,0.15), transparent 36%),
      radial-gradient(circle at 92% 18%, rgba(90,70,35,0.13), transparent 40%),
      radial-gradient(circle at 15% 90%, rgba(90,70,35,0.12), transparent 40%);
    mix-blend-mode: multiply;
    opacity: 0.72;
  }

  /* faint “creases” */
  .paper-inner::after{
    content:"";
    position:absolute;
    inset:0;
    border-radius:16px;
    pointer-events:none;
    background:
      linear-gradient(0deg, transparent 18%, rgba(40,30,15,0.06) 18.3%, transparent 18.6%),
      linear-gradient(0deg, transparent 62%, rgba(40,30,15,0.055) 62.3%, transparent 62.6%),
      linear-gradient(90deg, transparent 48%, rgba(40,30,15,0.045) 48.2%, transparent 48.4%);
    opacity: 0.6;
    mix-blend-mode: multiply;
  }

  .paper p{
    position:relative;
    margin:0;
    color: var(--ink);
    font-size: clamp(14px, 1.55vw, 18px);
    line-height: 1.45;
    letter-spacing: 0.01em;
  }

  .paper strong{
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  /* =========================
     ENVELOPE PANELS
  ========================= */
  .env-back,
  .env-front,
  .env-flap{
    position:absolute;
    inset:0;
    border-radius: 22px;
    border: 1px solid var(--stroke);
  }

  .env-back{
    z-index: 1;
    background:
      repeating-linear-gradient(0deg, rgba(60,40,20,0.05) 0 1px, transparent 1px 4px),
      repeating-linear-gradient(90deg, rgba(60,40,20,0.04) 0 1px, transparent 1px 6px),
      radial-gradient(circle at 20% 35%, rgba(120,90,40,0.07), transparent 48%),
      linear-gradient(180deg, var(--env-0), var(--env-1));
    box-shadow: 0 26px 70px var(--shadow);
  }

  .env-front{
    z-index: 4;
    background:
      repeating-linear-gradient(90deg, rgba(60,40,20,0.04) 0 1px, transparent 1px 6px),
      radial-gradient(circle at 76% 72%, rgba(120,90,40,0.06), transparent 52%),
      linear-gradient(180deg, #efe4cc, #d6c9af);
    clip-path: polygon(0 45%, 50% 76%, 100% 45%, 100% 100%, 0 100%);
  }

  /* flap */
  .env-flap{
    z-index: 5;
    background:
      repeating-linear-gradient(0deg, rgba(60,40,20,0.04) 0 1px, transparent 1px 6px),
      radial-gradient(circle at 30% 30%, rgba(255,255,255,0.22), transparent 52%),
      radial-gradient(circle at 65% 70%, rgba(120,90,40,0.05), transparent 55%),
      linear-gradient(180deg, #f3ead3, #dfd2ba);
    clip-path: polygon(0 0, 100% 0, 100% 45%, 50% 76%, 0 45%);
    transform-origin: top center;
    transform: rotateX(0deg);
    transition: transform 950ms cubic-bezier(.2,.9,.2,1);
  }

  .env-back::after{
    content:"";
    position:absolute;
    inset: 10px;
    border-radius: 18px;
    border: 1px solid rgba(0,0,0,0.08);
    opacity: 0.45;
    pointer-events:none;
  }

  /* =========================
     WAX SEAL (attached to flap)
  ========================= */
  .seal{
    position:absolute;
    left:50%;
    top:62%;
    transform: translate(-50%, -50%);
    width: clamp(58px, 7.4vw, 92px);
    height: clamp(58px, 7.4vw, 92px);
    border-radius: 999px;
    border: none;
    padding:0;
    background: transparent;
    cursor:pointer;
    filter: drop-shadow(0 18px 28px rgba(0,0,0,0.50));
    transition: transform 220ms ease;
  }
  .seal:active{ transform: translate(-50%, -50%) scale(0.975); }
  .seal:focus-visible{
    outline: 3px solid rgba(255,255,255,0.30);
    outline-offset: 4px;
  }
  .seal svg{ width:100%; height:100%; display:block; }

  /* =========================
     OPEN STATE
  ========================= */
  .envelope.open .env-flap{
    transform: rotateX(180deg);
  }

  .envelope.open .paper{
    opacity: 1;
    transform: translateY(-44.5%) scale(1); /* slightly lower when open */
    pointer-events:auto;
  }

  /* show the reseal hit zone only when open */
  .envelope.open .reseal-hit{
    display:block;
  }

  @media (prefers-reduced-motion: reduce){
    body{ animation:none; }
    .env-flap, .paper{ transition:none !important; }
  }
</style>
</head>

<body>
  <div class="wrap">
    <div class="stage">
      <div class="envelope" id="envelope" aria-expanded="false">
        <div class="env-back"></div>

        <div class="paper" id="paper" aria-hidden="true">
          <div class="paper-inner">
            <p>
              When as a child I laughed and wept,<br>
              Time <strong>CREPT.</strong><br><br>

              When as a youth I waxed more bold,<br>
              Time <strong>STROLLED.</strong><br><br>

              When I became a full grown man,<br>
              Time <strong>RAN.</strong><br><br>

              When older still I daily grew,<br>
              Time <strong>FLEW.</strong><br><br>

              Soon I shall find, in passing on,<br>
              Time <strong>GONE.</strong><br><br>

              O Christ! wilt Thou have saved me then?<br><br>

              <strong>AMEN.</strong>
            </p>
          </div>
        </div>

        <div class="env-front"></div>

        <!-- Flap + seal (click seal to open/close) -->
        <div class="env-flap" id="flap">
          <button class="seal" id="sealBtn" type="button" aria-label="Open or reseal envelope">
            <svg viewBox="0 0 100 100" aria-hidden="true">
              <defs>
                <radialGradient id="waxGrad" cx="35%" cy="26%" r="78%">
                  <stop offset="0%"  stop-color="#d24a51"/>
                  <stop offset="38%" stop-color="#8a0f17"/>
                  <stop offset="100%" stop-color="#3d0407"/>
                </radialGradient>

                <filter id="waxRough" x="-20%" y="-20%" width="140%" height="140%">
                  <feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="2" seed="11" result="noise"/>
                  <feDisplacementMap in="SourceGraphic" in2="noise" scale="8" xChannelSelector="R" yChannelSelector="G"/>
                </filter>

                <filter id="emboss" x="-25%" y="-25%" width="150%" height="150%">
                  <feGaussianBlur in="SourceAlpha" stdDeviation="1.15" result="blur"/>
                  <feSpecularLighting in="blur" surfaceScale="3.2" specularConstant="0.72" specularExponent="22" lighting-color="#ffffff" result="spec">
                    <feDistantLight azimuth="320" elevation="45"/>
                  </feSpecularLighting>
                  <feComposite in="spec" in2="SourceAlpha" operator="in" result="spec2"/>
                  <feComposite in="SourceGraphic" in2="spec2" operator="arithmetic" k1="1" k2="0.65" k3="0.22" k4="0"/>
                </filter>

                <radialGradient id="stampShadow" cx="45%" cy="44%" r="62%">
                  <stop offset="0%" stop-color="rgba(0,0,0,0.34)"/>
                  <stop offset="72%" stop-color="rgba(0,0,0,0.00)"/>
                </radialGradient>

                <radialGradient id="stampHi" cx="40%" cy="36%" r="62%">
                  <stop offset="0%" stop-color="rgba(255,255,255,0.14)"/>
                  <stop offset="72%" stop-color="rgba(255,255,255,0.00)"/>
                </radialGradient>
              </defs>

              <g filter="url(#waxRough)">
                <circle cx="50" cy="50" r="40" fill="url(#waxGrad)"/>
                <circle cx="50" cy="50" r="35" fill="none" stroke="rgba(255,255,255,0.14)" stroke-width="2"/>
              </g>

              <g filter="url(#emboss)">
                <circle cx="50" cy="50" r="39" fill="transparent"/>
              </g>

              <circle cx="50" cy="52" r="23" fill="url(#stampShadow)" opacity="0.95"/>
              <circle cx="50" cy="50" r="23" fill="url(#stampHi)" opacity="0.85"/>

              <circle cx="50" cy="51" r="18" fill="none" stroke="rgba(255,255,255,0.10)" stroke-width="1.5" opacity="0.8"/>
              <circle cx="50" cy="52" r="18" fill="none" stroke="rgba(0,0,0,0.14)" stroke-width="1.5" opacity="0.9"/>

              <text x="50" y="58" text-anchor="middle"
                    font-family="Georgia, 'Times New Roman', serif"
                    font-size="22"
                    fill="rgba(255,255,255,0.88)"
                    style="letter-spacing:2px;">
                ✶
              </text>
            </svg>
          </button>
        </div>

        <!-- Click the base/front area to reseal when open -->
        <button class="reseal-hit" id="resealBtn" type="button" aria-label="Reseal envelope base"></button>
      </div>
    </div>
  </div>

<script>
  (function(){
    const envelope = document.getElementById('envelope');
    const paper = document.getElementById('paper');
    const sealBtn  = document.getElementById('sealBtn');
    const resealBtn = document.getElementById('resealBtn');

    function setState(isOpen){
      envelope.classList.toggle('open', isOpen);
      envelope.setAttribute('aria-expanded', String(isOpen));
      paper.setAttribute('aria-hidden', String(!isOpen));
    }

    function openIt(){ setState(true); }
    function closeIt(){ setState(false); }
    function toggle(){ setState(!envelope.classList.contains('open')); }

    // Click seal toggles (open/close)
    sealBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      toggle();
    });

    // Clicking the base/front area reseals (only visible when open)
    resealBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      closeIt();
    });

    setState(false);
  })();
</script>
</body>
</html>
